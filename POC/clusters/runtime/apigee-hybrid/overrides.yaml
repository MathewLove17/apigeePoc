# ============================================================
# Apigee Hybrid - overrides.yaml
# Target: AKS / POC / ArgoCD / External Secrets
# ============================================================

instanceID: poc-apigee-aks

namespace: apigee

gcp:
  projectID: pocapigee-485810
  region: europe-west1

k8sCluster:
  name: clusterapigee
  region: westeurope

org: pocapigee-485810

# ------------------------------------------------------------
# Disable strict scheduling (VERY IMPORTANT for AKS)
# ------------------------------------------------------------
nodeAffinity:
  requiredForScheduling: false

podAntiAffinity:
  requiredForScheduling: false

# ------------------------------------------------------------
# Environments
# ------------------------------------------------------------
envs:
  - name: test
    serviceAccountSecretRefs:
      synchronizer: apigee-operator-guardrails-svc-account
      runtime: apigee-operator-guardrails-svc-account

# ------------------------------------------------------------
# Cassandra (POC sizing)
# ------------------------------------------------------------
cassandra:
  hostNetwork: false
  replicaCount: 1
  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Ingress Gateway
# ------------------------------------------------------------
ingressGateways:
  - name: hybrid-ingress
    replicaCountMin: 1
    replicaCountMax: 2
    svcAnnotations: {}
    nodeSelector: {}
    affinity: {}
    tolerations: []

# ------------------------------------------------------------
# Virtual Hosts
# ------------------------------------------------------------
virtualhosts:
  - name: hybrid-group
    selector:
      app: apigee-ingressgateway
    ingressName: hybrid-ingress
    sslCertPath: certs/tls.crt
    sslKeyPath: certs/tls.key

# ------------------------------------------------------------
# Guardrails (THE MOST IMPORTANT PART FOR YOUR ERROR)
# ------------------------------------------------------------
guardrails:
  serviceAccountRef: apigee-operator-guardrails-svc-account

  nodeAffinity:
    requiredForScheduling: false
  podAntiAffinity:
    requiredForScheduling: false

  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Apigee Operator
# ------------------------------------------------------------
operator:
  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# MART
# ------------------------------------------------------------
mart:
  serviceAccountRef: apigee-operator-guardrails-svc-account
  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Connect Agent
# ------------------------------------------------------------
connectAgent:
  serviceAccountRef: apigee-operator-guardrails-svc-account
  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Logger
# ------------------------------------------------------------
logger:
  enabled: true
  serviceAccountRef: apigee-operator-guardrails-svc-account
  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Metrics
# ------------------------------------------------------------
metrics:
  serviceAccountRef: apigee-operator-guardrails-svc-account
  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Watcher
# ------------------------------------------------------------
watcher:
  serviceAccountRef: apigee-operator-guardrails-svc-account
  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Runtime
# ------------------------------------------------------------
runtime:
  image:
    uri: gcr.io/apigee-release/hybrid/apigee-runtime
    tag: "1.16.0"

  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Mint (disabled for now)
# ------------------------------------------------------------
mintTaskScheduler:
  enabled: false
