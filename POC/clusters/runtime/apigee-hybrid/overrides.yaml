# ============================================================
# Apigee Hybrid 1.16 - overrides.yaml (AKS / PoC)
# ============================================================

instanceID: poc-apigee-aks
namespace: apigee

org: pocapigee-485810

gcp:
  projectID: pocapigee-485810
  region: europe-west1

k8sCluster:
  name: clusterapigee
  region: westeurope

# ------------------------------------------------------------
# AKS scheduling defaults: no strict affinity/selectors
# ------------------------------------------------------------
nodeSelector: {}
affinity: {}
tolerations: []

nodeAffinity:
  requiredForScheduling: false

podAntiAffinity:
  requiredForScheduling: false

# ------------------------------------------------------------
# Guardrails: usamos ESO + Secret existente (no file paths)
# ------------------------------------------------------------
guardrails:
  serviceAccountSecretProviderClass: ""   # lo deja apagado (CSI)
  nodeSelector: {}
  affinity: {}
  tolerations: []
  nodeAffinity:
    requiredForScheduling: false
  podAntiAffinity:
    requiredForScheduling: false

# ------------------------------------------------------------
# Environments
# OJO: aquí deben ir tus secrets reales para runtime/synchronizer.
# En tu caso tú tienes: gcp-sa-json (con gcp-creds.json)
# ------------------------------------------------------------
envs:
  - name: test
    serviceAccountSecretRefs:
      synchronizer: gcp-sa-json
      runtime: gcp-sa-json

# ------------------------------------------------------------
# Cassandra (PoC)
# ------------------------------------------------------------
cassandra:
  hostNetwork: false
  replicaCount: 1
  nodeSelector: {}
  affinity: {}
  tolerations: []

# ------------------------------------------------------------
# Ingress Gateway
# ------------------------------------------------------------
ingressGateways:
  - name: hybrid-ingress
    replicaCountMin: 1
    replicaCountMax: 2
    svcAnnotations: {}
    nodeSelector: {}
    affinity: {}
    tolerations: []

# ------------------------------------------------------------
# Virtual Hosts (envgroup = hybrid-group)
# ------------------------------------------------------------
virtualhosts:
  - name: hybrid-group
    selector:
      app: apigee-ingressgateway
    ingressName: hybrid-ingress
    sslCertPath: certs/tls.crt
    sslKeyPath: certs/tls.key

# ------------------------------------------------------------
# Control plane publishers (PoC)
# ------------------------------------------------------------
mart:
  serviceAccountRef: gcp-sa-json
  nodeSelector: {}
  affinity: {}
  tolerations: []

connectAgent:
  serviceAccountRef: gcp-sa-json
  nodeSelector: {}
  affinity: {}
  tolerations: []

logger:
  enabled: true
  serviceAccountRef: gcp-sa-json
  nodeSelector: {}
  affinity: {}
  tolerations: []

metrics:
  serviceAccountRef: gcp-sa-json
  nodeSelector: {}
  affinity: {}
  tolerations: []

watcher:
  serviceAccountRef: gcp-sa-json
  nodeSelector: {}
  affinity: {}
  tolerations: []

runtime:
  image:
    uri: gcr.io/apigee-release/hybrid/apigee-runtime
    tag: "1.16.0"
  nodeSelector: {}
  affinity: {}
  tolerations: []

mintTaskScheduler:
  enabled: false
